<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CizaHealth+ | Appel m√©dical</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --blue:#0a2a5e;
  --red:#c0392b;
  --green:#27ae60;
  --bg:#f4f7fb;
  --radius:22px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:var(--bg);
}

.app{
  max-width:430px;
  margin:auto;
  min-height:100vh;
  background:#000;
  color:#fff;
  display:flex;
  flex-direction:column;
}

/* HEADER */
.header{
  padding:16px;
  text-align:center;
  background:#000;
}
.ref{
  font-size:13px;
  opacity:.7;
}

/* VIDEO ZONE */
.video{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  opacity:.7;
}

/* STATUS */
.status{
  text-align:center;
  padding:10px;
  font-size:14px;
}

/* CONTROLS */
.controls{
  display:flex;
  justify-content:space-around;
  padding:18px;
  background:#111;
}
.controls button{
  border:none;
  border-radius:50%;
  width:56px;
  height:56px;
  font-size:14px;
  font-weight:600;
  color:#fff;
}
.mic{background:#333}
.mic.off{background:var(--red)}
.cam{background:#333}
.cam.off{background:var(--red)}
.end{background:var(--red)}
.start{background:var(--green)}
</style>

<script>
let micOn = true;
let camOn = true;
let callStarted = false;

document.addEventListener("DOMContentLoaded", ()=>{
  const data = JSON.parse(localStorage.getItem("cizaRequest"));
  if(!data){
    location.href="index.html";
    return;
  }
  document.getElementById("ref").innerText =
    "Dossier n¬∞ " + data.dossierNumber;

  // simulation connexion
  setTimeout(()=>{
    document.getElementById("status").innerText =
      "‚úî M√©decin connect√©";
    startCall();
  }, 2000);
});

function startCall(){
  callStarted = true;
  document.getElementById("status").innerText =
    "üü¢ Appel en cours";
  document.getElementById("startBtn").style.display="none";
}

function toggleMic(){
  micOn = !micOn;
  micBtn.classList.toggle("off", !micOn);
}

function toggleCam(){
  camOn = !camOn;
  camBtn.classList.toggle("off", !camOn);
}

function endCall(){
  document.getElementById("status").innerText =
    "üî¥ Appel termin√©";
  setTimeout(()=>{
    location.href="index.html";
  },1500);
}
</script>
</head>

<body>

<div class="app">

  <div class="header">
    <div class="ref" id="ref"></div>
  </div>

  <div class="video">
    Flux vid√©o s√©curis√© (WebRTC √† int√©grer)
  </div>

  <div class="status" id="status">
    ‚è≥ Connexion au professionnel‚Ä¶
  </div>

  <div class="controls">
    <button id="micBtn" class="mic" onclick="toggleMic()">üé§</button>
    <button id="camBtn" class="cam" onclick="toggleCam()">üì∑</button>
    <button id="startBtn" class="start" onclick="startCall()">‚ñ∂</button>
    <button class="end" onclick="endCall()">‚õî</button>
  </div>

</div>

</body>
</html>
